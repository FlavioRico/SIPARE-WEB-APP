<app-navbar></app-navbar>

<ngx-spinner
  bdColor="#fff"
  size="large"
  color="black"
  type="ball-scale-multiple"
>
    <p style="font-size: 20px; color: black">Cargando contenido...</p>
</ngx-spinner>

<div class="container">

  <div class="alert alert-primary title-opc" role="alert">
        <strong>CONSAR</strong> - Archivos de llaves mensuales
  </div>

  <div *ngIf="!keysExists" class="alert alert-warning" role="alert">
		<h4 class="alert-heading">Atenci√≥n</h4>
		<hr>
		<p class="mb-0">No existen archivos para mostrar.</p>
  </div>

  <div *ngIf="keysExists" class="table-responsive" style="text-align: center; font-size: smaller;">
      <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey; width: 10%;">
              Inicio de vigencia
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
              Fin de vigencia
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
              Nombre de archivo de Llave
            </th>
            <th scope="col" class="custom-th" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
                Archivo enviado
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
                Nombre del acuse
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
                Acuse
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey; width: 10%;">
                Fecha de acuse
            </th>
            <th scope="col" style="background: white; color: black; border-bottom: 1px solid grey; border-top: 1px solid grey;">
                Respuesta
          </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let key of keys">
            <td class="custom-date"><p>{{ key.startValidityDate }}</p></td>
            <td class="custom-date">{{ key.endValidityDate }}</td>
            <td>{{ key.passwordFileName }}</td>
            <td class="custom-th">
                <button *ngIf="key.alfrescoFileId !== null" (click)="downloadContent(key.alfrescoFileId, key.passwordFileName)" type="button" class="btn btn-outline-success">
                    Descargar
                </button>
            </td>
            <td>{{ key.replyFileName }}</td>
            <td>
              <button *ngIf="key.replyAlfrescoId !== null" (click)="downloadContent(key.replyAlfrescoId, key.replyFileName)" type="button" class="btn btn-outline-success">
                  Descargar
              </button>
            </td>
            <td class="custom-date">{{ key.replyDate }}</td>
            <td>{{ key.reply }}</td>
          </tr>
        </tbody>
      </table>
  </div>

</div>